{"version":3,"sources":["components/Menu.tsx","State.tsx","utils/MathUtils.tsx","components/FunctionGeneratorChannel.tsx","components/WakeLock.tsx","components/FunctionGeneratorAudio.tsx","utils/FrequencyUtils.tsx","pages/FunctionGenerator.tsx","components/graph.js","components/triggers.js","components/cursors.js","components/wave.js","components/Canvas.js","pages/OScope.tsx","pages/About.tsx","pages/Tutorial.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object"],"names":["appPages","title","url","iosIcon","mailOutline","mdIcon","mailSharp","paperPlaneOutline","paperPlaneSharp","Menu","location","useLocation","contentId","type","id","mode","map","appPage","index","autoHide","className","pathname","routerLink","routerDirection","lines","detail","class","src","defaultChannelState","frequency","amplitude","waveform","phase","outputting","initialState","channelOne","channelTwo","currChannel","earWarning","AppContext","createContext","persistedState","JSON","parse","window","localStorage","modifyChannelState","state","channelData","onChannel","newState","targetChannel","channelObj","reducer","action","payload","value","min","max","Math","channel","AppContextProvider","props","fullInitialState","React","useReducer","dispatch","useEffect","toSerialize","stringify","Provider","children","Consumer","setChannelOutputtingAction","getTargetChannel","target","getFrequency","getAmplitude","getWaveform","getPhase","getOutputting","transformPhase","FunctionGeneratorChannel","oscillator","useRef","stereo","gain","delay","active","newOsc","audioCtx","createOscillator","current","newGain","createGain","newStereo","createStereoPanner","offset","pan","newDelay","createDelay","delayTime","connect","destination","analyser","syncMultiplier","start","ceil","currentTime","stop","disconnect","WakeLock","enabled","Insomnia","keepAwake","allowSleepAgain","FunctionGeneratorAudio","AudioContext","close","freqOne","freqTwo","chOne","chTwo","FunctionGenerator","useContext","useIonAlert","present","cssClass","header","message","buttons","text","handler","activeChannel","getActiveChannel","setFrequency","useCallback","freq","setFrequencyAction","chOneFrequency","chTwoFrequency","setAmplitude","amp","setAmplitudeAction","chOneAmplitude","chTwoAmplitude","setWaveform","setWaveformAction","chOneWaveform","chTwoWaveform","setPhase","setPhaseAction","chOnePhase","chTwoPhase","setCurrChannel","setCurrChannelAction","chOneOutputting","chTwoOutputting","toggleChOneOutputting","toggleChTwoOutputting","useState","showPopover","frequencyPopoverState","setShowFrequencyPopover","amplitudePopoverState","setShowAmplitudePopover","phasePopoverState","setShowPhasePopover","popoverFrequencySet","popoverAmplitudeSet","popoverPhaseSet","keyUpHandler","event","popover","key","inputFrequency","inputAmplitude","inputPhase","chOneValues","chTwoValues","color","slot","style","fontWeight","fullscreen","scrollY","onClick","round","alt","log","step","onIonChange","e","frequencyValue","exp","logarithmic","isOpen","isPlatform","showBackdrop","onDidPresent","setFocus","onDidDismiss","ref","inputmode","placeholder","parseInt","onKeyUp","drawGraph","graphLayer","Paper","Layer","drawGridLines","width","height","boundingRect","width_per_rectangle","height_per_rectangle","i","xPos","left","topPoint","Point","top","bottomPoint","bottom","aLine","Path","Line","strokeColor","strokeWidth","yPos","oldyPos","oldxPos","hatchMark","hatch1","hatch2","leftPoint","rightPoint","right","incx","view","bounds","on","activate","removeChildren","clamp","num","Trigger","axis","this","basePath","segments","length","fillColor","selected","closed","rotation","selecting","pos","position","x","y","hitDetected","hitTest","point","stroke","fill","tolerance","item","drawTriggers","onUpdate","triggerLayer","timePos","voltPos","timeTrigger","voltTrigger","onMouseDown","mousedown","onMouseDrag","mousedrag","onMouseUp","mouseup","resize","cursorFlag","drawCursors","cursorLayer","timePos1","timePos2","voltPos1","voltPos2","timeCursorDiff","abs","voltCursorDiff","timeCursorLine1","strokeCap","dashArray","timeCursor1","Circle","center","radius","timeCursorLine2","timeCursor2","voltCursorLine1","voltCursor1","voltCursorLine2","voltCursor2","visible","timeCursor1Active","voltCursor1Active","timeCursor2Active","voltCursor2Active","hitOptions","timeHitResult1","voltHitResult1","timeHitResult2","voltHitResult2","remove","drawingWave","voltageDiv","timeDiv","timeDiff","voltDiff","autoset","maxPoint","bufferSize","sampleRate","voltageMultiplierConstant","triggerPoint","triggerFlag","drawWave","frequencyChangeCallback","autosetFinishCallback","timeDivChangeCallback","voltDivChangeCallback","waveLayer","dataArray","Float32Array","bufferIdx","findTrigger","floor","point1","point2","findMaxVoltage","findFrequency","crossCount","firstIndex","lastIndex","audioinput","startCapture","streamToWebAudio","addEventListener","evt","data","checkMicrophonePermission","hasPermission","console","getMicrophonePermission","navigator","mediaDevices","getUserMedia","audio","autoGainControl","echoCancellation","noiseSuppression","then","mediaStream","ctx","mic","createMediaStreamSource","spe","createAnalyser","fftSize","getFloatTimeDomainData","osc","setInterval","catch","err","name","path1","amount","offsetX","waveSpeed","_path","init","size","add","update","_event","tempVoltDiv","tempTimeDiv","segment","startPoint","timeOffset","bufferPoint","Canvas","canvasRef","renderFrame","animate","clientWidth","canvas","setup","val1","val2","setTriggers","voltageDivChangeCallback","cursorChangeCallback","draw","requestAnimationFrame","cancelAnimationFrame","viewSize","Size","clientHeight","emit","isFullscreen","val","playPauseFlag","OScope","voltUnitDiv","flag","setFlag","fullscreenFlag","setFullscreenFlag","displayFlag","setDisplayFlag","voltageStart","setVoltageStart","timeStart","setTimeStart","setTriggerFlag","setCursorFlag","setAutoset","setTimeDiff","setVoltDiff","changeDisplayFlag","changeFullscreenFlag","triggerMenuPopoverState","setShowTriggerMenuPopover","popoverTriggerMenuSet","toFixed","prev","About","Tutorial","App","listener","ev","register","Plugins","exitApp","document","removeEventListener","disabled","path","exact","to","Boolean","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","Error","code","ids","keys","Object","module","exports"],"mappings":"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","file":"static/js/main.7580e697.chunk.js","sourcesContent":["import {\r\n  IonContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonList,\r\n  IonListHeader,\r\n  IonMenu,\r\n  IonMenuToggle,\r\n  IonImg,\r\n} from '@ionic/react';\r\n\r\nimport { useLocation } from 'react-router-dom';\r\nimport { mailOutline, mailSharp, paperPlaneOutline, paperPlaneSharp } from 'ionicons/icons';\r\nimport './Menu.css';\r\n\r\ninterface AppPage {\r\n  url: string;\r\n  iosIcon: string;\r\n  mdIcon: string;\r\n  title: string;\r\n}\r\n\r\nconst appPages: AppPage[] = [\r\n  {\r\n    title: 'Function Generator',\r\n    url: '/page/FunctionGenerator',\r\n    iosIcon: mailOutline,\r\n    mdIcon: mailSharp\r\n  },\r\n  {\r\n    title: 'Oscilloscope',\r\n    url: '/page/OScope',\r\n    iosIcon: paperPlaneOutline,\r\n    mdIcon: paperPlaneSharp\r\n  },\r\n  {\r\n    title: 'Tutorial',\r\n    url: '/page/Tutorial',\r\n    iosIcon: paperPlaneOutline,\r\n    mdIcon: paperPlaneOutline\r\n  },\r\n  {\r\n    title: 'About',\r\n    url: '/page/About',\r\n    iosIcon: paperPlaneOutline,\r\n    mdIcon: paperPlaneOutline\r\n  }\r\n];\r\n\r\nconst Menu: React.FC = () => {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <IonMenu contentId=\"main\" type=\"overlay\" data-testid=\"menu-toggle\">\r\n      <IonContent>\r\n        <IonList id=\"inbox-list\" mode=\"ios\">\r\n          <IonListHeader>Husker Scope</IonListHeader>\r\n          {appPages.map((appPage, index) => {\r\n            return (\r\n              <IonMenuToggle key={index} autoHide={false}>\r\n                <IonItem className={location.pathname === appPage.url ? 'selected' : ''} routerLink={appPage.url} routerDirection=\"none\" lines=\"none\" detail={false}>\r\n                  {\r\n                  // Disabled icons for now\r\n                  // <IonIcon slot=\"start\" ios={appPage.iosIcon} md={appPage.mdIcon} /> \r\n                  }\r\n                  <IonLabel>{appPage.title}</IonLabel>\r\n                </IonItem>\r\n              </IonMenuToggle>\r\n            );\r\n          })}\r\n          <div className='the-logo'>\r\n            <IonImg class=\"logo-menu\" src=\"assets/Husker_Scope_Logo_rounded_corners.png\"></IonImg>\r\n          </div>\r\n        </IonList>\r\n      </IonContent>\r\n    </IonMenu>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { createContext, useEffect } from \"react\";\r\nimport { clamp } from 'utils/MathUtils';\r\n\r\n// Consts\r\nconst MIN_PHASE = 0;\r\nconst MAX_PHASE = 360;\r\n\r\n// Type definitions\r\n\r\n// Total app state\r\ninterface AppStateInterface {\r\n  channelOne: FuncGenChannelInterface;\r\n  channelTwo: FuncGenChannelInterface;\r\n  currChannel: 0 | 1;\r\n  earWarning: boolean;\r\n}\r\n\r\n// FG channel state\r\ninterface FuncGenChannelInterface {\r\n  frequency: number;\r\n  amplitude: number;\r\n  waveform: WAVETYPE;\r\n  phase: number;\r\n  outputting: boolean;\r\n}\r\n\r\n\r\n// Context including state and a dispatcher\r\ninterface AppContextInterface {\r\n  state:AppStateInterface;\r\n  dispatch:React.Dispatch<ACTIONTYPE>;\r\n}\r\n\r\n// Type for component accepting child props\r\ninterface AppProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n// Waveform types\r\nexport type WAVETYPE = \"square\" | \"sawtooth\" | \"sine\" | \"triangle\";\r\n\r\n// Reducer action types\r\ntype ACTIONTYPE =\r\n  | { type: \"acceptWarning\"; }\r\n  | { type: \"setFrequency\"; payload: number; }\r\n  | { type: \"setAmplitude\"; payload: number; }\r\n  | { type: \"setWaveform\"; payload: WAVETYPE;}\r\n  | { type: \"setPhase\"; payload: number;}\r\n  | { type: \"setChannelOutputting\"; channel: 0 | 1; payload: boolean;}\r\n  | { type: \"setCurrChannel\"; payload: 0 | 1;};\r\n\r\n\r\n// Default state for a channel\r\nconst defaultChannelState: FuncGenChannelInterface = {\r\n  frequency: 440,\r\n  amplitude: 100,\r\n  waveform: \"sine\",\r\n  phase: 180,\r\n  outputting: false,\r\n};\r\n\r\n// Default total app state\r\nconst initialState: AppStateInterface = {\r\n  channelOne: defaultChannelState,\r\n  channelTwo: defaultChannelState,\r\n  currChannel: 0,\r\n  earWarning: true,\r\n};\r\n\r\nexport const AppContext: React.Context<AppContextInterface> = createContext<AppContextInterface>({} as AppContextInterface);\r\n\r\n// Load state or default to empty persisted state\r\nconst persistedState: AppStateInterface = JSON.parse(window.localStorage['persistedState'] ?? '{}');\r\n\r\n// Helper function to apply a change to a channel\r\nconst modifyChannelState = (state: AppStateInterface, channelData: Partial<FuncGenChannelInterface>, onChannel = state.currChannel): AppStateInterface => {\r\n  // Shallow copy state\r\n  let newState = {...state};\r\n\r\n  // Get property name we are modifiying\r\n  let targetChannel: keyof AppStateInterface = onChannel === 0 ? 'channelOne' : 'channelTwo';\r\n\r\n  // Shallow copy target channel and replace given data\r\n  let channelObj = {...state[targetChannel], ...channelData};\r\n\r\n  return {...newState, [targetChannel]: channelObj};\r\n}\r\n\r\nconst reducer: React.Reducer<AppStateInterface, ACTIONTYPE> = (state: AppStateInterface, action: ACTIONTYPE) => {\r\n  switch(action.type) {\r\n    case \"acceptWarning\": {\r\n      return {...state, earWarning: false};\r\n    }\r\n    case \"setFrequency\": {\r\n      return modifyChannelState(state, {frequency: action.payload});\r\n    }\r\n    case \"setAmplitude\": {\r\n      return modifyChannelState(state, {amplitude: action.payload});\r\n    }\r\n    case \"setWaveform\": {\r\n      return modifyChannelState(state, {waveform: action.payload});\r\n    }\r\n    case \"setPhase\": {\r\n      return modifyChannelState(state, {phase: clamp(action.payload, MIN_PHASE, MAX_PHASE)});\r\n    }\r\n    case \"setChannelOutputting\": {\r\n      return modifyChannelState(state, {outputting: action.payload}, action.channel);\r\n    }\r\n    case \"setCurrChannel\": {\r\n      return {...state, currChannel: action.payload};\r\n    }\r\n  }\r\n\r\n  // Action not handled\r\n  return state;\r\n};\r\n\r\nexport function AppContextProvider(props : AppProps) {\r\n  // Deeply merge the initial state with persisted\r\n  const fullInitialState = {\r\n    ...initialState,\r\n    ...persistedState,\r\n    channelOne: {\r\n      ...initialState.channelOne,\r\n      ...persistedState.channelOne,\r\n    },\r\n    channelTwo: {\r\n      ...initialState.channelTwo,\r\n      ...persistedState.channelTwo,\r\n    },\r\n  };\r\n  \r\n  let [state, dispatch] = React.useReducer(reducer, fullInitialState);\r\n\r\n  useEffect(() => {\r\n    // Explicitly serialize these parts of state.\r\n    // This allows for modifying persistence behavior for particular state.\r\n    const toSerialize: AppStateInterface = {\r\n      ...state,\r\n      channelOne: {\r\n        ...state.channelOne,\r\n        outputting: false,\r\n      },\r\n      channelTwo: {\r\n        ...state.channelTwo,\r\n        outputting: false,\r\n      },\r\n      currChannel: 0,\r\n    };\r\n    window.localStorage['persistedState'] = JSON.stringify(toSerialize);\r\n  }, [state]);\r\n\r\n\r\n  let value = { state, dispatch }\r\n\r\n  return (\r\n    <AppContext.Provider value={value}>{props.children}</AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport const AppContextConsumer = AppContext.Consumer; \r\n\r\nexport const acceptWarning = (): ACTIONTYPE => \r\n({\r\n  type: 'acceptWarning',\r\n});\r\n\r\nexport const setFrequencyAction = (frequency: number): ACTIONTYPE =>\r\n({\r\n  type: 'setFrequency',\r\n  payload: frequency\r\n});\r\n\r\nexport const setAmplitudeAction = (amplitude: number): ACTIONTYPE =>\r\n({\r\n  type: 'setAmplitude',\r\n  payload: amplitude\r\n});\r\n\r\nexport const setWaveformAction = (waveform: WAVETYPE): ACTIONTYPE =>\r\n({\r\n  type: 'setWaveform',\r\n  payload: waveform\r\n});\r\n\r\nexport const setPhaseAction = (phase: number): ACTIONTYPE =>\r\n({\r\n  type: 'setPhase',\r\n  payload: phase\r\n});\r\n\r\nexport const setCurrChannelAction = (channel: 0 | 1): ACTIONTYPE =>\r\n({\r\n  type: 'setCurrChannel',\r\n  payload: channel\r\n});\r\n\r\nexport const setChannelOutputtingAction = (channel: 0 | 1, outputting: boolean): ACTIONTYPE =>\r\n({\r\n  type: 'setChannelOutputting',\r\n  payload: outputting,\r\n  channel: channel,\r\n});\r\n\r\n// Get current channel object\r\nexport const getActiveChannel = (state: AppStateInterface) => (getTargetChannel(state, state.currChannel));\r\nexport const getTargetChannel = (state: AppStateInterface, target: 0 | 1) => (target === 0 ? state.channelOne : state.channelTwo);\r\n\r\nexport const getFrequency = (channel: FuncGenChannelInterface) => (channel.frequency);\r\nexport const getAmplitude = (channel: FuncGenChannelInterface) => (channel.amplitude);\r\nexport const getWaveform = (channel: FuncGenChannelInterface) => (channel.waveform);\r\nexport const getPhase = (channel: FuncGenChannelInterface) => (channel.phase);\r\nexport const getOutputting = (channel: FuncGenChannelInterface) => (channel.outputting);\r\n","export function clamp(value: number, min: number, max: number) {\r\n  return Math.min(Math.max(value, min), max);\r\n}\r\n","import { useEffect, useRef } from 'react';\r\n\r\nimport type { WAVETYPE } from '../State';\r\n\r\nexport interface FGAudioChannel {\r\n  active: boolean,\r\n  frequency: number,\r\n  amplitude: number,\r\n  waveform: WAVETYPE,\r\n  phase: number,\r\n}\r\n\r\ninterface FGAudioChannelProps extends FGAudioChannel {\r\n  audioCtx: AudioContext,\r\n  channel: \"left\" | \"right\",\r\n  syncMultiplier: number,\r\n  analyser?: AnalyserNode,\r\n}\r\n\r\n// Convert from [0, 360] to corresponding amount of delay in seconds\r\nconst transformPhase = (frequency: number, phase: number) => {\r\n  return (1/frequency) * (phase/360 + 0.5);\r\n}\r\n\r\nexport const FunctionGeneratorChannel = (props: FGAudioChannelProps) => {\r\n  // Audio node refs\r\n  const oscillator = useRef<OscillatorNode>(null!);\r\n  const stereo = useRef<StereoPannerNode>(null!);\r\n  const gain = useRef<GainNode>(null!);\r\n  const delay = useRef<DelayNode>(null!);\r\n\r\n  // Value refs\r\n  const frequency = useRef<number>(440);\r\n  const amplitude = useRef<number>(100);\r\n  const phase = useRef<number>(180);\r\n\r\n  // Activate/deactivate\r\n  useEffect(() => {\r\n    // Is activating?\r\n    if(props.active) {\r\n      // Setup oscillator node\r\n      let newOsc = props.audioCtx.createOscillator();\r\n      newOsc.type = props.waveform;\r\n      newOsc.frequency.value = frequency.current;\r\n\r\n      // Setup gain node\r\n      let newGain = props.audioCtx.createGain();\r\n      newGain.gain.value = amplitude.current;\r\n\r\n      // Setup stereo node\r\n      let newStereo = props.audioCtx.createStereoPanner();\r\n      let offset: number = 0;\r\n      switch(props.channel) {\r\n        case \"left\": {\r\n          offset = -1;\r\n          break;\r\n        }\r\n        case \"right\": {\r\n          offset = 1;\r\n          break;\r\n        }\r\n        default: {\r\n          offset = 0;\r\n          break;\r\n        }\r\n      }\r\n\r\n      newStereo.pan.value = offset;\r\n\r\n      // Setup delay node\r\n      let newDelay = props.audioCtx.createDelay();\r\n      newDelay.delayTime.value = transformPhase(frequency.current, phase.current);\r\n\r\n      // Save to refs\r\n      oscillator.current = newOsc;\r\n      gain.current = newGain;\r\n      stereo.current = newStereo;\r\n      delay.current = newDelay;\r\n\r\n\r\n      // Connect nodes\r\n      newOsc.connect(newGain);\r\n      newGain.connect(newStereo);\r\n      newStereo.connect(newDelay);\r\n      newDelay.connect(props.audioCtx.destination);\r\n\r\n      // Connect to analyser if it exists\r\n      if(props.analyser) {\r\n        newDelay.connect(props.analyser);\r\n      }\r\n\r\n      // Start playing at next integer timestamp at least 0.05 seconds from now\r\n      // if the channels can be synced. Otherwise, start immediately.\r\n      if(props.syncMultiplier) {\r\n        newOsc.start(Math.ceil(props.audioCtx.currentTime + 0.05));\r\n      } else {\r\n        newOsc.start();\r\n      }\r\n\r\n      // Cleanup function\r\n      return () => {\r\n        newOsc.stop();\r\n        newOsc.disconnect();\r\n        newGain.disconnect();\r\n        newStereo.disconnect();\r\n        newDelay.disconnect();\r\n\r\n        if(props.analyser) {\r\n          props.analyser.disconnect();\r\n        }\r\n      };\r\n    }\r\n  }, [props.audioCtx, props.waveform, props.channel, props.active, props.analyser, props.syncMultiplier]);\r\n\r\n  // Update parameter values\r\n  useEffect(() => {\r\n    // Update ref\r\n    frequency.current = props.frequency;\r\n    amplitude.current = props.amplitude;\r\n    phase.current = props.phase;\r\n\r\n    // If active, also update current oscillator\r\n    if(props.active) {\r\n      oscillator.current.frequency.value = frequency.current;\r\n      gain.current.gain.value = amplitude.current;\r\n      delay.current.delayTime.value = transformPhase(frequency.current, phase.current);\r\n    }\r\n  }, [props.active, props.frequency, props.amplitude, props.phase]);\r\n\r\n  return null;\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { Insomnia } from '@awesome-cordova-plugins/insomnia';\r\n\r\ninterface WakeLockProps {\r\n  enabled: boolean;\r\n}\r\n\r\nconst WakeLock = (props: WakeLockProps) => {\r\n\r\n  useEffect(() => {\r\n    if(props.enabled) {\r\n      // Wake-lock on\r\n      Insomnia.keepAwake();\r\n\r\n      // Disable wakelock\r\n      return () => {\r\n        Insomnia.allowSleepAgain();\r\n      };\r\n    }\r\n\r\n  }, [props.enabled]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default WakeLock;\r\n","import React, { useRef, useEffect } from 'react';\r\n\r\nimport { FunctionGeneratorChannel } from './FunctionGeneratorChannel';\r\n\r\nimport type { FGAudioChannel } from './FunctionGeneratorChannel';\r\n\r\nimport { getSyncMultiplier } from 'utils/FrequencyUtils';\r\n\r\nimport WakeLock from 'components/WakeLock';\r\n\r\nexport interface FGAudioProps {\r\n  chOne: FGAudioChannel,\r\n  chTwo: FGAudioChannel,\r\n}\r\n\r\nexport const FunctionGeneratorAudio = (props: FGAudioProps) => {\r\n  const audioCtx = useRef<AudioContext>(null!);\r\n\r\n  // Init/cleanup audio context\r\n  useEffect(() => {\r\n    audioCtx.current = new AudioContext();\r\n\r\n    return () => {\r\n      audioCtx.current.close();\r\n    };\r\n  }, []);\r\n\r\n  // Check if should sync\r\n  const syncMultiplier = getSyncMultiplier(props.chOne.frequency, props.chTwo.frequency);\r\n\r\n  // Create the two channels\r\n  return (\r\n    <>\r\n      <WakeLock enabled={props.chOne.active || props.chTwo.active} />\r\n      <FunctionGeneratorChannel channel=\"left\" syncMultiplier={syncMultiplier} audioCtx={audioCtx.current} {...props.chOne} />\r\n      <FunctionGeneratorChannel channel=\"right\" syncMultiplier={syncMultiplier} audioCtx={audioCtx.current} {...props.chTwo} />\r\n    </>\r\n  );\r\n};\r\n","// Get the multiplier of the larger freq w.r.t. smaller or 0 if not divisible.\r\nexport function getSyncMultiplier(freqOne: number, freqTwo: number): number {\r\n  // Is one number a multiple of the other?\r\n  let remainder = Math.max(freqOne, freqTwo) % Math.min(freqOne, freqTwo);\r\n  \r\n  // Not a multiplier, return 0;\r\n  if(remainder !== 0) {\r\n    return 0;\r\n  }\r\n\r\n  // Otherwise, return multiplicity of larger frequency\r\n  return Math.max(freqOne, freqTwo) / Math.min(freqOne, freqTwo);\r\n}\r\n","import React, { useState, useContext, useEffect, useCallback, useRef } from 'react';\r\nimport {\r\n  IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar, IonRange,\r\n  IonButton, IonInput, IonImg, IonPopover, IonIcon, useIonAlert\r\n} from '@ionic/react';\r\n\r\nimport {\r\n  AppContext, setFrequencyAction, setAmplitudeAction, setWaveformAction,\r\n  setPhaseAction, setCurrChannelAction, setChannelOutputtingAction,\r\n  getFrequency, getAmplitude, getWaveform, getPhase, getActiveChannel,\r\n  getTargetChannel, getOutputting, acceptWarning,\r\n} from '../State';\r\n\r\nimport type { WAVETYPE } from '../State';\r\n\r\nimport { FunctionGeneratorAudio } from '../components/FunctionGeneratorAudio';\r\nimport './FunctionGenerator.css';\r\nimport { isPlatform } from '@ionic/core';\r\n\r\nconst FunctionGenerator: React.FC = () => {\r\n\r\n  const { state, dispatch } = useContext(AppContext);\r\n  const [present] = useIonAlert();\r\n\r\n  // Ear damage warning\r\n  useEffect(() => {\r\n    if(state.earWarning) {\r\n      present({\r\n        cssClass: 'alert',\r\n        header: 'Warning',\r\n        message: 'This app can produce loud sounds that can damage sensitive parts of the ear resulting in hearing loss.<br /><br />Use with caution and avoid wearing headphones.',\r\n        buttons: [ \r\n          {\r\n            text: 'I understand',\r\n            handler: () => {\r\n              dispatch(acceptWarning());\r\n            }\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  }, [dispatch, present, state.earWarning]);\r\n\r\n\r\n  // Effect for disabling channels outputting when leaving page\r\n  useEffect(() => {\r\n    // Cleanup\r\n    return () => {\r\n      dispatch(setChannelOutputtingAction(0, false));\r\n      dispatch(setChannelOutputtingAction(1, false));\r\n    }\r\n  }, [dispatch]);\r\n\r\n  const name = \"Function Generator\";\r\n\r\n  // Selected channel obj\r\n  const activeChannel = getActiveChannel(state);\r\n\r\n  // Left-right channels\r\n  const chOne = getTargetChannel(state, 0);\r\n  const chTwo = getTargetChannel(state, 1);\r\n\r\n  // Get and set frequency\r\n  const frequency = getFrequency(activeChannel);\r\n  const setFrequency = useCallback((freq: number) => {\r\n    dispatch(setFrequencyAction(freq));\r\n  }, [dispatch]);\r\n\r\n  // Get both channel frequencies\r\n  const chOneFrequency = getFrequency(chOne);\r\n  const chTwoFrequency = getFrequency(chTwo);\r\n\r\n  // Get and set amplitude\r\n  const amplitude = getAmplitude(activeChannel);\r\n  const setAmplitude = useCallback((amp: number) => {\r\n    dispatch(setAmplitudeAction(Math.max(0, amp)));\r\n  }, [dispatch]);\r\n\r\n  // Get both channel amplitude\r\n  const chOneAmplitude = getAmplitude(chOne);\r\n  const chTwoAmplitude = getAmplitude(chTwo);\r\n\r\n  // Get and set waveform\r\n  const waveform = getWaveform(activeChannel);\r\n  const setWaveform = useCallback((waveform: WAVETYPE) => {\r\n    dispatch(setWaveformAction(waveform));\r\n  }, [dispatch]);\r\n\r\n  const chOneWaveform = getWaveform(chOne);\r\n  const chTwoWaveform = getWaveform(chTwo);\r\n\r\n  // Get and set phase\r\n  const phase = getPhase(activeChannel);\r\n  const setPhase = useCallback((phase: number) => {\r\n    dispatch(setPhaseAction(phase));\r\n  }, [dispatch]);\r\n\r\n  const chOnePhase = getPhase(chOne);\r\n  const chTwoPhase = getPhase(chTwo);\r\n\r\n  // Get and set current channel\r\n  const currChannel = state.currChannel;\r\n  const setCurrChannel = useCallback((channel: 0 | 1) => {\r\n    dispatch(setCurrChannelAction(channel));\r\n  }, [dispatch]);\r\n\r\n  // Get and set channels outputting\r\n  const chOneOutputting = getOutputting(chOne);\r\n  const chTwoOutputting = getOutputting(chTwo);\r\n\r\n  const toggleChOneOutputting = useCallback(() => {\r\n    dispatch(setChannelOutputtingAction(0, !chOneOutputting));\r\n  }, [chOneOutputting, dispatch]);\r\n\r\n  const toggleChTwoOutputting = useCallback(() => {\r\n    dispatch(setChannelOutputtingAction(1, !chTwoOutputting));\r\n  }, [chTwoOutputting, dispatch]);\r\n\r\n  // parsing frequency slider value to change it to frequency value\r\n  function logarithmic(value: number) {\r\n    let frequencyValue = Math.exp(value) + 19;\r\n    setFrequency(frequencyValue);\r\n  }\r\n\r\n  // For showing and hiding popovers  \r\n  const [frequencyPopoverState, setShowFrequencyPopover] = useState({ showPopover: false, frequency: 440 });\r\n  const [amplitudePopoverState, setShowAmplitudePopover] = useState({ showPopover: false, amplitude: 100 });\r\n  const [phasePopoverState, setShowPhasePopover] = useState({ showPopover: false, phase: 180 });\r\n\r\n  function popoverFrequencySet() {\r\n    setFrequency(frequencyPopoverState.frequency);\r\n    setShowFrequencyPopover({ showPopover: false, frequency: frequency });\r\n  }\r\n\r\n  function popoverAmplitudeSet() {\r\n    setAmplitude(amplitudePopoverState.amplitude);\r\n    setShowAmplitudePopover({ showPopover: false, amplitude: amplitude });\r\n  }\r\n\r\n  function popoverPhaseSet() {\r\n    setPhase(phasePopoverState.phase);\r\n    setShowPhasePopover({ showPopover: false, phase: phase });\r\n  }\r\n\r\n  function keyUpHandler(event: React.KeyboardEvent<HTMLIonInputElement>, popover: string) {\r\n    if (event.key === \"Enter\") {\r\n      switch (popover) {\r\n        case \"frequency\": popoverFrequencySet(); break;\r\n        case \"amplitude\": popoverAmplitudeSet(); break;\r\n        case \"phase\": popoverPhaseSet(); break;\r\n      }\r\n    }\r\n  }\r\n\r\n  const inputFrequency = useRef<HTMLIonInputElement>(null!);\r\n  const inputAmplitude = useRef<HTMLIonInputElement>(null!);\r\n  const inputPhase = useRef<HTMLIonInputElement>(null!);\r\n\r\n  function frequencyInputFocus() {\r\n    inputFrequency.current.setFocus();\r\n  }\r\n\r\n  function amplitudeInputFocus() {\r\n    inputAmplitude.current.setFocus();\r\n  }\r\n\r\n  function phaseInputFocus() {\r\n    inputPhase.current.setFocus();\r\n  }\r\n\r\n  const chOneValues = { active: chOneOutputting, frequency: chOneFrequency, amplitude: chOneAmplitude / 100, phase: chOnePhase, waveform: chOneWaveform }\r\n  const chTwoValues = { active: chTwoOutputting, frequency: chTwoFrequency, amplitude: chTwoAmplitude / 100, phase: chTwoPhase, waveform: chTwoWaveform }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar mode=\"ios\" color=\"primary\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          <IonTitle><b style={{fontWeight: \"bolder\"}}>Husker Scope</b>{\": \" + name}</IonTitle>\r\n          <IonImg slot=\"end\" class=\"logo\" src=\"assets/Husker_Scope_Logo_circle.png\"></IonImg>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen scrollY={false} color=\"secondary\">\r\n        <FunctionGeneratorAudio chOne={chOneValues} chTwo={chTwoValues} />\r\n        <div className=\"frequency-waveform-channels\">\r\n\r\n          {/* Channel 1 Editing Button */}\r\n          <div className=\"channel-div\">\r\n            <IonButton class=\"edit-button-L\" mode=\"ios\" onClick={() => { setCurrChannel(0) }} color={currChannel === 0 ? \"primary\" : \"light\"} data-testid=\"left-edit\">\r\n              <div className=\"edit-button-contents\">\r\n                CH1 <br /> FQ: {Math.round(chOneFrequency)} Hz <br /> AMP: {chOneAmplitude} <br /> PH: {chOnePhase}°\r\n                <img className=\"edit-img\" src={`/assets/${chOneWaveform}-wave.png`} alt=\"\" />\r\n              </div>\r\n            </IonButton>\r\n          </div>\r\n\r\n          <div className=\"frequency-and-waveform\">\r\n\r\n            {/* Frequency Button and Slider */}\r\n            <div className=\"frequency-button-div\">\r\n              <IonButton class=\"frequency-button\" mode=\"ios\" color=\"light\" onClick={() => setShowFrequencyPopover({ showPopover: true, frequency: frequency })} data-testid=\"frequency-button\">\r\n                Frequency: {Math.round(frequency)} Hz\r\n              </IonButton>\r\n            </div>\r\n\r\n            <div>\r\n              <IonRange class=\"range-frequency\" mode=\"ios\" value={Math.log(frequency - 19)} min={0} max={Math.log(20000 - 19)} step={.0000000001} onIonChange={e => logarithmic(e.detail.value as any)} data-testid=\"frequency-range\"/>\r\n            </div>\r\n\r\n            {/* Waveform Buttons */}\r\n            <div className=\"waveform-buttons\">\r\n              <IonButton class=\"waveform-button\" color={waveform === \"sine\" ? \"primary\" : \"light\"} onClick={() => { setWaveform(\"sine\") }} mode=\"ios\" data-testid=\"sine-button\">\r\n                <IonIcon class=\"waveform-icon-1\" slot=\"icon-only\" src=\"/assets/icon/sine-wave2.svg\" /></IonButton>\r\n              <IonButton class=\"waveform-button\" color={waveform === \"triangle\" ? \"primary\" : \"light\"} onClick={() => { setWaveform(\"triangle\") }} mode=\"ios\" data-testid=\"triangle-button\">\r\n                <IonIcon class=\"waveform-icon-1\" slot=\"icon-only\" src=\"/assets/icon/triangle-wave2.svg\" /></IonButton>\r\n              <IonButton class=\"waveform-button\" color={waveform === \"square\" ? \"primary\" : \"light\"} onClick={() => { setWaveform(\"square\") }} mode=\"ios\" data-testid=\"square-button\">\r\n                <IonIcon class=\"waveform-icon-2\" slot=\"icon-only\" src=\"/assets/icon/square-wave2.svg\" /></IonButton>\r\n              <IonButton class=\"waveform-button\" color={waveform === \"sawtooth\" ? \"primary\" : \"light\"} onClick={() => { setWaveform(\"sawtooth\") }} mode=\"ios\" data-testid=\"sawtooth-button\">\r\n                <IonIcon class=\"waveform-icon-2\" slot=\"icon-only\" src=\"/assets/icon/sawtooth-wave2.svg\" /></IonButton>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Channel 2 Editing Button */}\r\n          <div className=\"channel-div\">\r\n            <IonButton class=\"edit-button-R\" mode=\"ios\" onClick={() => { setCurrChannel(1) }} color={currChannel === 1 ? \"primary\" : \"light\"} data-testid=\"right-edit\">\r\n              <div className=\"edit-button-contents\">\r\n                CH2 <br /> FQ: {Math.round(chTwoFrequency)} Hz <br /> AMP: {chTwoAmplitude} <br /> PH: {chTwoPhase}°\r\n                <img className=\"edit-img\" src={`/assets/${chTwoWaveform}-wave.png`} alt=\"\" />\r\n              </div>\r\n            </IonButton>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        {/* Amplitude, Start/Stop Buttons, Phase */}\r\n        <div className=\"amplitude-start-phase\">\r\n\r\n          {/* Amplitude Button and Slider */}\r\n          <div className=\"amplitude-components\">\r\n            <IonButton class=\"amplitude-button\" mode=\"ios\" color=\"light\" onClick={() => setShowAmplitudePopover({ showPopover: true, amplitude: amplitude })} data-testid=\"amplitude-button\">\r\n              Amplitude: {amplitude}%\r\n            </IonButton>\r\n            <IonRange class=\"range-amplitude\" mode=\"ios\" value={amplitude} min={0} max={100} step={1} onIonChange={e => setAmplitude(e.detail.value as any)} data-testid=\"amplitude-range\"/>\r\n          </div>\r\n\r\n          {/* Play/Pause Buttons */}\r\n          <div className=\"start-buttons\">\r\n            {/* CH1 Play/Pause Button */}\r\n            <IonButton class=\"hold-button\" mode=\"ios\" onClick={() => { toggleChOneOutputting() }} color={chOneOutputting ? \"primary\" : \"light\"} data-testid=\"left-play\">\r\n              <div className=\"edit-button-contents\">\r\n                CH1\r\n                <img className=\"play-pause-img\" src={chOneOutputting ? \"/assets/pause.png\" : \"/assets/play.png\"} alt=\"\" ></img>\r\n              </div>\r\n            </IonButton>\r\n\r\n            {/* CH2 Play/Pause Button */}\r\n            <IonButton class=\"hold-button\" mode=\"ios\" onClick={() => { toggleChTwoOutputting() }} color={chTwoOutputting ? \"primary\" : \"light\"} data-testid=\"right-play\">\r\n              <div className=\"edit-button-contents\">\r\n                CH2\r\n                <img className=\"play-pause-img\" src={chTwoOutputting ? \"/assets/pause.png\" : \"/assets/play.png\"} alt=\"\" ></img>\r\n              </div>\r\n            </IonButton>\r\n          </div>\r\n\r\n          {/* Phase Button and Slider */}\r\n          <div className=\"phase-components\">\r\n            <IonButton class=\"phase-button\" mode=\"ios\" color=\"light\" onClick={() => setShowPhasePopover({ showPopover: true, phase: phase })} data-testid=\"phase-button\">\r\n              Phase: {phase}°\r\n            </IonButton>\r\n            <IonRange class=\"range-phase\" mode=\"ios\" value={phase} min={0} max={360} step={1} onIonChange={e => setPhase(e.detail.value as any)} data-testid=\"phase-range\"/>\r\n          </div>\r\n\r\n        </div>\r\n\r\n\r\n        {/* Frequency Popover */}\r\n        <IonPopover\r\n          isOpen={frequencyPopoverState.showPopover}\r\n          cssClass={isPlatform(\"ios\") || isPlatform(\"android\") ? \"input-popover\" : \"input-popover-web\"}\r\n          mode=\"ios\"\r\n          showBackdrop={true}\r\n          onDidPresent={() => frequencyInputFocus()}\r\n          onDidDismiss={() => setShowFrequencyPopover({ showPopover: false, frequency: frequency })} data-testid=\"frequency-popup\">\r\n          <div className=\"popover-content\">\r\n            <IonInput ref={inputFrequency} class=\"input-popover-text\" type=\"number\" inputmode=\"numeric\" placeholder=\"20 to 20000 Hz\"\r\n              onIonChange={e => setShowFrequencyPopover((state) => { return { ...state, frequency: parseInt(e.detail.value!, 10) } })}\r\n              onKeyUp={e => keyUpHandler(e, \"frequency\")}\r\n            ></IonInput>\r\n            <IonButton\r\n              onClick={(e: any) => popoverFrequencySet()} data-testid=\"frequency-confirm\">\r\n              CONFIRM\r\n            </IonButton>\r\n          </div>\r\n        </IonPopover>\r\n\r\n        {/* Amplitude Popover */}\r\n        <IonPopover\r\n          isOpen={amplitudePopoverState.showPopover}\r\n          cssClass={isPlatform(\"ios\") || isPlatform(\"android\") ? \"input-popover\" : \"input-popover-web\"}\r\n          mode=\"ios\"\r\n          showBackdrop={true}\r\n          onDidPresent={() => amplitudeInputFocus()}\r\n          onDidDismiss={() => setShowAmplitudePopover({ showPopover: false, amplitude: frequency })} data-testid=\"amplitude-popup\">\r\n          <div className=\"popover-content\">\r\n            <IonInput ref={inputAmplitude} class=\"input-popover-text\" type=\"number\" inputmode=\"numeric\" placeholder=\"0 to 100\"\r\n              onIonChange={e => setShowAmplitudePopover((state) => { return { ...state, amplitude: parseInt(e.detail.value!, 10) } })}\r\n              onKeyUp={e => keyUpHandler(e, \"amplitude\")}\r\n            ></IonInput>\r\n            <IonButton onClick={(e: any) => popoverAmplitudeSet()} data-testid=\"amplitude-confirm\">\r\n              CONFIRM\r\n            </IonButton>\r\n          </div>\r\n        </IonPopover>\r\n\r\n        {/* Phase Popover */}\r\n        <IonPopover\r\n          isOpen={phasePopoverState.showPopover}\r\n          cssClass={isPlatform(\"ios\") || isPlatform(\"android\") ? \"input-popover\" : \"input-popover-web\"}\r\n          mode=\"ios\"\r\n          showBackdrop={true}\r\n          onDidPresent={() => phaseInputFocus()}\r\n          onDidDismiss={() => setShowPhasePopover({ showPopover: false, phase: phase })} data-testid=\"phase-popup\">\r\n          <div className=\"popover-content\">\r\n            <IonInput ref={inputPhase} class=\"input-popover-text\" type=\"number\" inputmode=\"numeric\" placeholder=\"0° to 360°\"\r\n              onIonChange={e => setShowPhasePopover((state) => { return { ...state, phase: parseInt(e.detail.value!, 10) } })}\r\n              onKeyUp={e => keyUpHandler(e, \"phase\")}\r\n            ></IonInput>\r\n            <IonButton onClick={() => popoverPhaseSet()} data-testid=\"phase-confirm\">\r\n              CONFIRM\r\n            </IonButton>\r\n          </div>\r\n        </IonPopover>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default FunctionGenerator;\r\n\r\n","import Paper from \"paper\";\r\n\r\nconst drawGraph = () => {\r\n  let graphLayer = new Paper.Layer();\r\n\r\n  var drawGridLines = function (width, height, boundingRect) {\r\n    var width_per_rectangle = boundingRect.width / width;\r\n    var height_per_rectangle = boundingRect.height / height;\r\n    var hatchLengthFactor = 0.012;\r\n\r\n    //set up vertical grid lines\r\n    for (var i = 0; i <= width; i++) {\r\n      var xPos = boundingRect.left + i * width_per_rectangle;\r\n      var topPoint = new Paper.Point(xPos, boundingRect.top);\r\n      var bottomPoint = new Paper.Point(xPos, boundingRect.bottom);\r\n      var aLine = new Paper.Path.Line(topPoint, bottomPoint);\r\n      aLine.strokeColor = \"black\";\r\n      aLine.strokeWidth = 0.6;\r\n\r\n      //fix left and right vertical lines being cut off\r\n      if (i === 0) {\r\n        aLine.strokeWidth = 2;\r\n      }\r\n      if (i === width) {\r\n        aLine.strokeWidth = 2.5;\r\n      }\r\n      //\r\n\r\n      //vertical center line and hatch marks\r\n      if (i === 5) {\r\n        aLine.strokeWidth = 1.5;\r\n\r\n        //already have xPos\r\n        var yPos = boundingRect.top;\r\n        var oldyPos = yPos;\r\n        var oldxPos = xPos;\r\n\r\n        //create hatch marks for vertical center line\r\n        for (var hatchMark = 0; hatchMark < 40; hatchMark++) {\r\n          xPos = oldxPos;\r\n\r\n          let yPos = (boundingRect.height * hatchMark) / 40;\r\n\r\n          xPos = xPos * (1 - hatchLengthFactor); //make a point to the left of the center line\r\n          var hatch1 = new Paper.Point(xPos, yPos);\r\n          xPos = xPos * (1 + 2 * hatchLengthFactor); //make a point to the right of the center line\r\n          var hatch2 = new Paper.Point(xPos, yPos);\r\n          var connect = new Paper.Path.Line(hatch1, hatch2);\r\n          connect.strokeColor = \"black\";\r\n          connect.strokeWidth = 0.8;\r\n        }\r\n      }\r\n    }\r\n\r\n    //set up horizontal grid lines\r\n    for (i = 0; i <= height; i++) {\r\n      yPos = boundingRect.top + i * height_per_rectangle;\r\n      var leftPoint = new Paper.Point(boundingRect.left, yPos);\r\n      var rightPoint = new Paper.Point(boundingRect.right, yPos);\r\n      aLine = new Paper.Path.Line(leftPoint, rightPoint);\r\n      aLine.strokeColor = \"black\";\r\n      aLine.strokeWidth = 0.6;\r\n\r\n      //fix horizontal lines being cut off\r\n      if (i === 0) {\r\n        aLine.strokeWidth = 2.5;\r\n      }\r\n      if (i === height) {\r\n        aLine.strokeWidth = 2.5;\r\n      }\r\n      //\r\n\r\n      //horizontal center line\r\n      if (i === 4) {\r\n        aLine.strokeWidth = 1.5;\r\n\r\n        //create increments to space out hatch marks evenly\r\n        var incx = boundingRect.width / 40;\r\n\r\n        //already have yPos\r\n        xPos = boundingRect.left;\r\n        oldyPos = yPos;\r\n        oldxPos = xPos;\r\n        //create hatch marks for horizontal center line\r\n        for (hatchMark = 1; hatchMark <= 40; hatchMark++) {\r\n          xPos = oldxPos;\r\n          yPos = oldyPos;\r\n\r\n          xPos = xPos + hatchMark * incx;\r\n          yPos = yPos * (1 - hatchLengthFactor); //make a point to the left of the center line\r\n          hatch1 = new Paper.Point(xPos, yPos);\r\n          yPos = yPos * (1 + 2 * hatchLengthFactor); //make a point to the right of the center line\r\n          hatch2 = new Paper.Point(xPos, yPos);\r\n          connect = new Paper.Path.Line(hatch1, hatch2);\r\n          connect.strokeColor = \"black\";\r\n          connect.strokeWidth = 0.8;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  var numOfWBoxes = 10;\r\n  var numOfHBoxes = 8;\r\n  drawGridLines(numOfWBoxes, numOfHBoxes, Paper.view.bounds);\r\n\r\n  // Redraw on resize\r\n  Paper.view.on(\"resize\", function (event) {\r\n    graphLayer.activate();\r\n    graphLayer.removeChildren();\r\n    drawGridLines(numOfWBoxes, numOfHBoxes, Paper.view.bounds);\r\n  });\r\n};\r\n\r\nexport default drawGraph;\r\n","import Paper from \"paper\";\r\n\r\nconst clamp = (num, min, max) => Math.min(Math.max(num, min), max);\r\n\r\n\r\nconst HORIZONTAL = 0;\r\nconst VERTICAL = 1;\r\n\r\nclass Trigger {\r\n  constructor(axis) {\r\n    let numOfWBoxes = 10;\r\n    let numOfHBoxes = 8;\r\n\r\n    let length = 10;\r\n\r\n    this.axis = axis;\r\n\r\n    this.basePath = new Paper.Path({\r\n      segments: [[0, 0], [length, length], [length*2, 0]],\r\n      fillColor: 'black',\r\n      selected: false,\r\n      closed: true,\r\n      rotation: this.axis === HORIZONTAL ? 0 : -90,\r\n    });\r\n\r\n    this.selecting = false;\r\n    this.pos = 0.5;\r\n\r\n    if(this.axis === HORIZONTAL) {\r\n      this.basePath.position.x = Paper.view.bounds.width * this.pos;\r\n      this.basePath.position.y = length/2;\r\n    } else {\r\n      this.basePath.position.x = length/2;\r\n      this.basePath.position.y = Paper.view.bounds.height * (1 - this.pos);\r\n    }\r\n  }\r\n\r\n  mousedown(event) {\r\n    const hitOptions = {\r\n      stroke: true,\r\n      fill: true,\r\n      tolerance: 50,\r\n    }\r\n    \r\n    const hitDetected = this.basePath.hitTest(event.point, hitOptions);\r\n    this.selecting = hitDetected && hitDetected.item;\r\n  }\r\n\r\n  mousedrag(event) {\r\n    if(this.selecting) {\r\n      if(this.axis === HORIZONTAL) {\r\n        this.pos = clamp(event.point.x / Paper.view.bounds.width, 0.01, 0.99);\r\n        this.basePath.position.x = Paper.view.bounds.width * this.pos;\r\n      } else {\r\n        this.pos = 1 - clamp(event.point.y / Paper.view.bounds.height, 0.01, 0.99);\r\n        this.basePath.position.y = Paper.view.bounds.height * (1 - this.pos);\r\n      }\r\n\r\n      return this.pos;\r\n    }\r\n  }\r\n\r\n  mouseup(event) {\r\n    this.selecting = null;\r\n  }\r\n\r\n  resize(event) {\r\n    if(this.axis === HORIZONTAL) {\r\n      this.basePath.position.x = Paper.view.bounds.width * this.pos;\r\n    } else {\r\n      this.basePath.position.y = Paper.view.bounds.height * (1 - this.pos);\r\n    }\r\n  }\r\n}\r\n\r\nconst drawTriggers = (onUpdate) => {\r\n  let triggerLayer = new Paper.Layer();\r\n  let timePos = 0.5;\r\n  let voltPos = 0.5;\r\n  \r\n  let timeDiff = timePos - 0.5;\r\n  let voltDiff = voltPos - 0.5;\r\n\r\n  //Create trigger marks for demo\r\n  let timeTrigger = new Trigger(HORIZONTAL);\r\n  var voltTrigger = new Trigger(VERTICAL);\r\n\r\n  Paper.view.onMouseDown = function (event) {\r\n    timeTrigger.mousedown(event);\r\n    voltTrigger.mousedown(event);\r\n  }\r\n\r\n  Paper.view.onMouseDrag = function (event) {\r\n    timePos = timeTrigger.mousedrag(event) ?? timePos;\r\n    voltPos = voltTrigger.mousedrag(event) ?? voltPos;\r\n\r\n    timeDiff = timePos;\r\n    voltDiff = 2*voltPos - 1;\r\n\r\n    onUpdate(timeDiff, voltDiff);\r\n  }\r\n\r\n  Paper.view.onMouseUp = function (event) {\r\n    timeTrigger.mouseup(event);\r\n    voltTrigger.mouseup(event);\r\n  };\r\n\r\n  Paper.view.on('resize', function (event) {\r\n    triggerLayer.activate();\r\n\r\n    timeTrigger.resize(event);\r\n    voltTrigger.resize(event);\r\n  });\r\n}\r\n\r\nexport default drawTriggers;\r\n\r\n","import Paper from \"paper\";\r\nimport { isPlatform } from '@ionic/react';\r\n\r\nlet cursorFlag = false;\r\n\r\nexport const setCursorFlag = (val) => cursorFlag = val;\r\n\r\n\r\nconst drawCursors = (onUpdate) => {\r\n  let cursorLayer = new Paper.Layer();\r\n\r\n  let timePos1 = .25;\r\n  let timePos2 = .75;\r\n  let voltPos1 = .25;\r\n  let voltPos2 = .75;\r\n\r\n  let timeCursorDiff = Math.abs(timePos1 - timePos2);\r\n  let voltCursorDiff = Math.abs(voltPos1 - voltPos2);\r\n\r\n  //Create cursor marks for demo\r\n  var timeCursorLine1 = new Paper.Path({\r\n    segments: [[Paper.view.bounds.width * timePos1, 0], [Paper.view.bounds.width * timePos1, Paper.view.bounds.height]],\r\n    selected: false\r\n  });\r\n  \r\n  timeCursorLine1.strokeColor = 'Black';\r\n  timeCursorLine1.strokeWidth = 3;\r\n  timeCursorLine1.strokeCap = 'round';\r\n  timeCursorLine1.dashArray = [10, 12];\r\n\r\n\r\n  var timeCursor1 = new Paper.Path.Circle({\r\n    center: Paper.view.center,\r\n    \r\n    radius: 15,\r\n    fillColor: 'red'\r\n  });\r\n\r\n  var timeCursorLine2 = new Paper.Path({\r\n    segments: [[Paper.view.bounds.width*timePos2, 0], [Paper.view.bounds.width*timePos2, Paper.view.bounds.height]],\r\n    selected: false\r\n  });\r\n  \r\n  timeCursorLine2.strokeColor = 'Black';\r\n  timeCursorLine2.strokeWidth = 3;\r\n  timeCursorLine2.strokeCap = 'round';\r\n  timeCursorLine2.dashArray = [10, 12];\r\n\r\n  var timeCursor2 = new Paper.Path.Circle({\r\n    center: Paper.view.center,\r\n    radius: 15,\r\n    fillColor: 'red'\r\n  });\r\n\r\n  var voltCursorLine1 = new Paper.Path({\r\n    segments: [[0, Paper.view.bounds.height *(1-voltPos1)], [Paper.view.bounds.width, Paper.view.bounds.height * (1-voltPos1)]],\r\n    selected: false\r\n  });\r\n  \r\n  voltCursorLine1.strokeColor = 'Black';\r\n  voltCursorLine1.strokeWidth = 3;\r\n  voltCursorLine1.strokeCap = 'round';\r\n  voltCursorLine1.dashArray = [10, 12];\r\n\r\n\r\n  var voltCursor1 = new Paper.Path.Circle({\r\n    center: Paper.view.center,\r\n    radius: 15,\r\n    fillColor: 'red'\r\n  });\r\n\r\n  var voltCursorLine2 = new Paper.Path({\r\n    segments: [[0, Paper.view.bounds.height*(1-voltPos2)], [Paper.view.bounds.width, Paper.view.bounds.height*(1-voltPos2)]],\r\n    selected: false\r\n  });\r\n  \r\n  voltCursorLine2.strokeColor = 'Black';\r\n  voltCursorLine2.strokeWidth = 3;\r\n  voltCursorLine2.strokeCap = 'round';\r\n  voltCursorLine2.dashArray = [10, 12];\r\n  \r\n  var voltCursor2 = new Paper.Path.Circle({\r\n    center: Paper.view.center,\r\n    radius: 15,\r\n    fillColor: 'red'\r\n  });\r\n\r\n  timeCursor1.position.x = Paper.view.bounds.width * timePos1;\r\n  timeCursor1.position.y = Paper.view.bounds.height;\r\n\r\n  voltCursor1.position.x = Paper.view.bounds.width;\r\n  voltCursor1.position.y = Paper.view.bounds.height * (1-voltPos1);\r\n\r\n  timeCursor2.position.x = Paper.view.bounds.width * timePos2;\r\n  timeCursor2.position.y = Paper.view.bounds.height;\r\n\r\n  voltCursor2.position.x = Paper.view.bounds.width;\r\n  voltCursor2.position.y = Paper.view.bounds.height * (1-voltPos2);\r\n  \r\n  timeCursor1.visible = cursorFlag;\r\n  timeCursor2.visible = cursorFlag;\r\n  voltCursor1.visible = cursorFlag;\r\n  voltCursor2.visible = cursorFlag;\r\n  timeCursorLine1.visible = cursorFlag;\r\n  timeCursorLine2.visible = cursorFlag;\r\n  voltCursorLine1.visible = cursorFlag;\r\n  voltCursorLine2.visible = cursorFlag;\r\n\r\n  onUpdate(timeCursorDiff, voltCursorDiff);\r\n\r\n\r\n  // Move cursor using touch\r\n  var hitOptions = {\r\n    stroke: true,\r\n    fill: true,\r\n    tolerance: 50,\r\n  }\r\n\r\n  var timeCursor1Active;\r\n  var voltCursor1Active;\r\n  var timeCursor2Active;\r\n  var voltCursor2Active;\r\n\r\n  Paper.view.on('mousedown', function(event) {\r\n    var timeHitResult1 = timeCursor1.hitTest(event.point, hitOptions);\r\n    timeCursor1Active = timeHitResult1 && timeHitResult1.item;\r\n\r\n    var voltHitResult1 = voltCursor1.hitTest(event.point, hitOptions);\r\n    voltCursor1Active = voltHitResult1 && voltHitResult1.item;\r\n\r\n    var timeHitResult2 = timeCursor2.hitTest(event.point, hitOptions);\r\n    timeCursor2Active = timeHitResult2 && timeHitResult2.item;\r\n\r\n    var voltHitResult2 = voltCursor2.hitTest(event.point, hitOptions);\r\n    voltCursor2Active = voltHitResult2 && voltHitResult2.item;\r\n\r\n  });\r\n\r\n  Paper.view.on('mousedrag', function(event) {\r\n    if (timeCursor1Active) {\r\n      timeCursor1Active.position.x = event.point.x;\r\n      timeCursorLine1.position.x = event.point.x;\r\n      timePos1 = event.point.x / Paper.view.bounds.width;\r\n    } else if (voltCursor1Active) {\r\n      voltCursor1Active.position.y = event.point.y;\r\n      voltCursorLine1.position.y = event.point.y;\r\n      voltPos1 = 1 - (event.point.y / Paper.view.bounds.height);\r\n    } else if (timeCursor2Active) {\r\n      timeCursor2Active.position.x = event.point.x;\r\n      timeCursorLine2.position.x = event.point.x;\r\n      timePos2 = event.point.x / Paper.view.bounds.width;\r\n    } else if (voltCursor2Active) {\r\n      voltCursor2Active.position.y = event.point.y;\r\n      voltCursorLine2.position.y = event.point.y;\r\n      voltPos2 = 1 - (event.point.y / Paper.view.bounds.height);\r\n    }\r\n\r\n    timeCursorDiff = Math.abs(timePos1 - timePos2);\r\n    voltCursorDiff = Math.abs(voltPos1 - voltPos2);\r\n\r\n\r\n    onUpdate(timeCursorDiff, voltCursorDiff);\r\n\r\n  });\r\n\r\n  Paper.view.on('mouseup', function (event) {\r\n    timeCursor1Active = null;\r\n    voltCursor1Active = null;\r\n    timeCursor2Active = null;\r\n    voltCursor2Active = null;\r\n  });\r\n\r\n  \r\n  Paper.view.on('resize', function (event) {\r\n    cursorLayer.activate();\r\n    timeCursorLine1.remove();\r\n    timeCursorLine2.remove();\r\n    voltCursorLine1.remove();\r\n    voltCursorLine2.remove();\r\n\r\n    timeCursor1.remove();\r\n    timeCursor2.remove();\r\n    voltCursor1.remove();\r\n    voltCursor2.remove();\r\n\r\n    timeCursorLine1 = new Paper.Path({\r\n      segments: [[timePos1 * Paper.view.bounds.width, 0], [timePos1 * Paper.view.bounds.width, Paper.view.bounds.height]],\r\n      selected: false\r\n    });\r\n    \r\n    timeCursorLine1.strokeColor = 'Black';\r\n    timeCursorLine1.strokeWidth = 3;\r\n    timeCursorLine1.strokeCap = 'round';\r\n    timeCursorLine1.dashArray = [10, 12];\r\n  \r\n  \r\n    timeCursor1 = new Paper.Path.Circle({\r\n      center: Paper.view.center,\r\n      radius: 15,\r\n      fillColor: 'red'\r\n    });\r\n  \r\n    timeCursorLine2 = new Paper.Path({\r\n      segments: [[timePos2 * Paper.view.bounds.width, 0], [timePos2 * Paper.view.bounds.width, Paper.view.bounds.height]],\r\n      selected: false\r\n    });\r\n    \r\n    timeCursorLine2.strokeColor = 'Black';\r\n    timeCursorLine2.strokeWidth = 3;\r\n    timeCursorLine2.strokeCap = 'round';\r\n    timeCursorLine2.dashArray = [10, 12];\r\n  \r\n    timeCursor2 = new Paper.Path.Circle({\r\n      center: Paper.view.center,\r\n      radius: 15,\r\n      fillColor: 'red'\r\n    });\r\n  \r\n    voltCursorLine1 = new Paper.Path({\r\n      segments: [[0, (1-voltPos1) * Paper.view.bounds.height], [Paper.view.bounds.width, (1-voltPos1) * Paper.view.bounds.height]],\r\n      selected: false\r\n    });\r\n    \r\n    voltCursorLine1.strokeColor = 'Black';\r\n    voltCursorLine1.strokeWidth = 3;\r\n    voltCursorLine1.strokeCap = 'round';\r\n    voltCursorLine1.dashArray = [10, 12];\r\n  \r\n  \r\n    voltCursor1 = new Paper.Path.Circle({\r\n      center: Paper.view.center,\r\n      radius: 15,\r\n      fillColor: 'red'\r\n    });\r\n  \r\n    voltCursorLine2 = new Paper.Path({\r\n      segments: [[0, (1-voltPos2) * Paper.view.bounds.height], [Paper.view.bounds.width, (1-voltPos2) * Paper.view.bounds.height]],\r\n      selected: false\r\n    });\r\n    \r\n    voltCursorLine2.strokeColor = 'Black';\r\n    voltCursorLine2.strokeWidth = 3;\r\n    voltCursorLine2.strokeCap = 'round';\r\n    voltCursorLine2.dashArray = [10, 12];\r\n    \r\n    voltCursor2 = new Paper.Path.Circle({\r\n      center: Paper.view.center,\r\n      radius: 15,\r\n      fillColor: 'red'\r\n    });\r\n  \r\n    timeCursor1.position.x = Paper.view.bounds.width * timePos1;\r\n    timeCursor1.position.y = Paper.view.bounds.height;\r\n  \r\n    voltCursor1.position.x = Paper.view.bounds.width;\r\n    voltCursor1.position.y = Paper.view.bounds.height * (1-voltPos1);\r\n  \r\n    timeCursor2.position.x = Paper.view.bounds.width * timePos2;\r\n    timeCursor2.position.y = Paper.view.bounds.height;\r\n  \r\n    voltCursor2.position.x = Paper.view.bounds.width;\r\n    voltCursor2.position.y = Paper.view.bounds.height * (1-voltPos2);\r\n\r\n    timeCursor1.visible = cursorFlag;\r\n    timeCursor2.visible = cursorFlag;\r\n    voltCursor1.visible = cursorFlag;\r\n    voltCursor2.visible = cursorFlag;\r\n    timeCursorLine1.visible = cursorFlag;\r\n    timeCursorLine2.visible = cursorFlag;\r\n    voltCursorLine1.visible = cursorFlag;\r\n    voltCursorLine2.visible = cursorFlag;\r\n  });\r\n\r\n  Paper.view.on('frame', function (event) {\r\n    timeCursor1.visible = cursorFlag;\r\n    timeCursor2.visible = cursorFlag;\r\n    voltCursor1.visible = cursorFlag;\r\n    voltCursor2.visible = cursorFlag;\r\n    timeCursorLine1.visible = cursorFlag;\r\n    timeCursorLine2.visible = cursorFlag;\r\n    voltCursorLine1.visible = cursorFlag;\r\n    voltCursorLine2.visible = cursorFlag;\r\n  });\r\n\r\n}\r\n\r\nexport default drawCursors;","import Paper from \"paper\";\r\n\r\nlet drawingWave = false;\r\nlet voltageDiv = .5;\r\nlet timeDiv = 1;\r\n\r\nlet timeDiff = 0.5;\r\nlet voltDiff = 0;\r\n\r\nlet autoset = false;\r\nlet maxPoint = 0;\r\nlet frequency = 0;\r\n\r\nconst bufferSize = 8192;\r\n\r\nlet sampleRate = 44100;\r\n\r\n//.707 VRMS = -1 to 1 V AC\r\n//No resistance (no adapter): 149 Hz\r\n//With resistance (adapter): 91 Hz\r\nconst voltageMultiplierConstant = .5 * .9;\r\n\r\nlet triggerPoint = null;\r\nlet triggerFlag = null;\r\n\r\nexport const setDrawWave = (val) => drawingWave = val;\r\nexport const setVoltageDiv = (val) => voltageDiv = val;\r\nexport const setTimeDiv = (val) => timeDiv = val;\r\nexport const setTriggers = (val1, val2) => { timeDiff = val1; voltDiff = val2; }\r\nexport const setAutoset = (val) => autoset = val;\r\nexport const setTriggerFlag = (val) => triggerFlag = val;\r\n\r\nconst drawWave = function (frequencyChangeCallback, autosetFinishCallback, timeDivChangeCallback, voltDivChangeCallback) {\r\n\r\n  let waveLayer = new Paper.Layer();\r\n\r\n  // Input buffer\r\n  let dataArray = new Float32Array(bufferSize);\r\n  let bufferIdx = 0;\r\n\r\n  let findTrigger = () => {\r\n    triggerPoint = null;\r\n    for(let i = Math.floor(dataArray.length/2); i < dataArray.length-1; i++){\r\n      let point1 = dataArray[i];\r\n      let point2 = dataArray[i+1];\r\n      //Rising Edge\r\n      if(triggerFlag === true){\r\n        if(point1 <= (voltDiff*voltageDiv)/voltageMultiplierConstant){\r\n          if(point2 > (voltDiff*voltageDiv)/voltageMultiplierConstant){\r\n            triggerPoint = i;\r\n            break;\r\n          }\r\n        }\r\n      }else {\r\n        //Falling Edge \r\n        if(point1 >= (voltDiff*voltageDiv)/voltageMultiplierConstant){\r\n          if(point2 < (voltDiff*voltageDiv)/voltageMultiplierConstant){\r\n            triggerPoint = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n    }\r\n  };\r\n\r\n  let findMaxVoltage = () => {\r\n    maxPoint = .01;\r\n    for(let i = 0; i < dataArray.length; i++){\r\n      let point = Math.abs(dataArray[i]);\r\n      if (point > maxPoint) {\r\n        maxPoint = point;\r\n      }\r\n    }\r\n  }\r\n\r\n  let findFrequency = () => {\r\n    let crossCount = 0;\r\n    let firstIndex = -1;\r\n    let lastIndex = -1;\r\n    for(let i = 0; i < dataArray.length - 1; i++){\r\n      let point1 = dataArray[i];\r\n      let point2 = dataArray[i+1];\r\n      if (point1 === 0 || point1 < 0 && point2 > 0 || point1 > 0 && point2 < 0) {\r\n        if (crossCount === 0) {\r\n          firstIndex = i;\r\n        }\r\n        lastIndex = i;\r\n        crossCount++;\r\n      }\r\n    }\r\n\r\n    if (firstIndex === -1) {\r\n      frequency = 0;\r\n    } else {\r\n      frequency = sampleRate * .5 * (crossCount - 1) / (lastIndex - firstIndex);\r\n    }\r\n\r\n    frequencyChangeCallback(Math.round(frequency));\r\n  }\r\n\r\n  if (window.audioinput) {\r\n    function startCapture() {\r\n      window.audioinput.start({\r\n        streamToWebAudio: false, bufferSize: bufferSize\r\n      });\r\n    }\r\n\r\n    //audio input update\r\n    window.addEventListener(\"audioinput\", (evt) => {\r\n      // Skip input if not drawing\r\n      if(drawingWave) {\r\n        bufferIdx = 0;\r\n        dataArray = evt.data;\r\n      }\r\n\r\n      findTrigger();\r\n      findMaxVoltage();\r\n      findFrequency();\r\n    });\r\n\r\n\r\n    window.audioinput.checkMicrophonePermission(function (hasPermission) {\r\n      \r\n      if (hasPermission) {\r\n        console.log(\"We already have permission to record.\");        \r\n        startCapture();\r\n      } else {\r\n        window.audioinput.getMicrophonePermission(function (hasPermission, message) {\r\n          if (hasPermission) {\r\n            console.log(\"User granted us permission to record.\");\r\n            startCapture();\r\n          } else {\r\n            console.log(\"Failed to obtain capture permission\");\r\n          }\r\n        });\r\n      }\r\n    });\r\n  } else {\r\n    var constraints = { audio: {autoGainControl: false, echoCancellation: false,  noiseSuppression: false}};\r\n\r\n    navigator.mediaDevices.getUserMedia(constraints)\r\n    .then(function(mediaStream) {\r\n      let ctx = new AudioContext({sampleRate: 44100});\r\n      sampleRate = ctx.sampleRate;\r\n      let mic = ctx.createMediaStreamSource(mediaStream);\r\n      let spe = ctx.createAnalyser();\r\n      spe.fftSize = bufferSize;\r\n      spe.getFloatTimeDomainData(dataArray);\r\n      mic.connect(spe);\r\n\r\n      let osc = ctx.createOscillator();\r\n      osc.type = 'sine';\r\n      osc.frequency.value = 440;\r\n      //osc.connect(spe);\r\n      //osc.start();\r\n      //spe.connect(ctx.destination);\r\n\r\n      setInterval(() => {\r\n        // Skip if not drawing\r\n        if(drawingWave) {\r\n          bufferIdx = 0;\r\n          spe.getFloatTimeDomainData(dataArray);\r\n        }\r\n\r\n        findTrigger();\r\n        findMaxVoltage();\r\n        findFrequency();\r\n      }, 20)\r\n    })\r\n    .catch(function(err) { console.log(err.name + \": \" + err.message); }); // always check for errors at the end.\r\n  }\r\n\r\n  function Wave() {\r\n    this.amount = 200;\r\n    this.height = 10;\r\n    this.offsetX = 0;\r\n    this.waveSpeed = 3;\r\n    this.selected = false;\r\n\r\n    this._path = new Paper.Path({ fillColor: this.color });\r\n\r\n    this.init = function () {\r\n      this._path.strokeColor = this.color;\r\n      this._path.selected = this.selected;\r\n\r\n      this._path.segments = [];\r\n\r\n      // Cover entire horizontal screen space with points\r\n      for (let i = 0; i <= this.amount; i++) {\r\n        let point = new Paper.Point(i / this.amount * Paper.view.size.width,\r\n          1 / 2 * Paper.view.size.height);\r\n        this._path.add(point);\r\n      }\r\n    }\r\n\r\n    this.update = function (_event) {\r\n      let height = Paper.view.size.height;\r\n\r\n      if (autoset) {\r\n        let numOfIterations = 0;\r\n\r\n        let tempVoltDiv = Math.min(Math.max(Math.round(.5 * 10 * maxPoint) / 10, .1), 4.9);\r\n\r\n        let tempTimeDiv = 1;\r\n        let divider = .4536;\r\n        if (frequency < 440) {\r\n          let timeDividerConstant = 400;\r\n          tempTimeDiv = Math.round((timeDividerConstant / frequency)/divider);\r\n        }\r\n\r\n        autoset = false;\r\n        timeDivChangeCallback(tempTimeDiv);\r\n        voltDivChangeCallback(tempVoltDiv);\r\n        autosetFinishCallback();\r\n      }\r\n\r\n      // Loop through every second point of the path to make waves:\r\n      for (let i = 0; i <= this.amount; i++) {\r\n        let segment = this._path.segments[i];\r\n      \r\n        let startPoint = bufferIdx;\r\n        let timeOffset = 0;\r\n        if(triggerPoint != null){\r\n          startPoint = triggerPoint;\r\n          timeOffset = -((timeDiff * this.amount * timeDiv) | 0);\r\n        }\r\n\r\n        // Just use latest buffer data for now :)\r\n        let idx = timeOffset + startPoint + (i * timeDiv);\r\n        let bufferPoint = dataArray[idx];\r\n\r\n        // Flip vertically for rendering\r\n        bufferPoint = -bufferPoint / voltageDiv * voltageMultiplierConstant;\r\n\r\n        // Handle the data\r\n        segment.point.y = (bufferPoint + 1) * (height / 2);\r\n      }\r\n\r\n\r\n      if(drawingWave) {\r\n        bufferIdx += this.amount + 1;\r\n        bufferIdx %= dataArray.length;\r\n      }\r\n      //this._path.smooth({ from: 0, to: this.amount });\r\n    }\r\n\r\n  }\r\n\r\n  var numOfWBoxes = 10;\r\n  var numOfHBoxes = 8;\r\n\r\n  var path1 = new Wave();\r\n  path1.color = 'blue';\r\n  path1.height = 10;\r\n  //path1.selected = true;\r\n  path1.init();\r\n\r\n\r\n  Paper.view.on('frame', function (event) {\r\n    waveLayer.activate();\r\n    path1.update(event);\r\n  });\r\n  \r\n\r\n  Paper.view.on('resize', function (event) {\r\n    waveLayer.activate();\r\n    path1.init();\r\n  });\r\n\r\n};\r\n\r\nexport default drawWave;\r\n","import React, { useRef, useEffect } from 'react';\r\nimport Paper from 'paper';\r\nimport drawGraph from 'components/graph';\r\nimport drawTriggers from 'components/triggers';\r\nimport drawCursors, {setCursorFlag} from 'components/cursors';\r\nimport drawWave, {setDrawWave, setVoltageDiv, setTimeDiv, setTriggers, setAutoset, setTriggerFlag} from 'components/wave';\r\nimport { isPlatform } from '@ionic/react';\r\n\r\n/* global */\r\n\r\nconst Canvas = props => {\r\n  \r\n  const canvasRef = useRef(null);\r\n  const renderFrame = useRef(null);\r\n\r\n  const animate = () => {\r\n    if(canvasRef.current !== null && canvasRef.current.clientWidth !== 0) {\r\n        const canvas = canvasRef.current;\r\n        Paper.setup(canvas);\r\n\r\n        drawGraph();\r\n        drawTriggers((val1, val2) => setTriggers(val1, val2));\r\n        drawWave(props.frequencyChangeCallback, props.autosetFinishCallback, props.timeDivChangeCallback, props.voltageDivChangeCallback);\r\n        drawCursors(props.cursorChangeCallback);\r\n\r\n        Paper.view.draw();\r\n    } else {\r\n      renderFrame.current = requestAnimationFrame(animate);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    renderFrame.current = requestAnimationFrame(animate);\r\n\r\n    return () => {\r\n      cancelAnimationFrame(renderFrame.current);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // If we have a view, fix the scaling on fullscreen toggle\r\n    if(Paper.view) {\r\n      Paper.view.viewSize = isPlatform(\"ios\") || isPlatform(\"android\") ? new Paper.Size(canvasRef.current.clientWidth, canvasRef.current.clientHeight) : \r\n                                                                         new Paper.Size(canvasRef.current.clientWidth*2, canvasRef.current.clientHeight*2);\r\n      Paper.view.emit('resize', {});\r\n    }\r\n  }, [props.isFullscreen]);\r\n\r\n  \r\n  useEffect(() => {\r\n    setDrawWave(props.playPauseFlag);\r\n  }, [props.playPauseFlag]);\r\n\r\n  useEffect(() => {\r\n    setVoltageDiv(props.voltageDiv);\r\n  }, [props.voltageDiv]);\r\n\r\n  useEffect(() => {\r\n    setTimeDiv(props.timeDiv);\r\n  }, [props.timeDiv]);\r\n\r\n  useEffect(() => {\r\n    setAutoset(props.autoset);\r\n  }, [props.autoset]);\r\n\r\n  useEffect(() => {\r\n    setTriggerFlag(props.triggerFlag);\r\n  }, [props.triggerFlag]);\r\n\r\n  useEffect(() => {\r\n    setCursorFlag(props.cursorFlag);\r\n  }, [props.cursorFlag]);\r\n  \r\n  return <canvas ref={canvasRef} className={props.className} resize=\"true\" id=\"canvas\" />\r\n}\r\n\r\nexport default Canvas;\r\n","import React, {useState} from 'react';\r\nimport { isPlatform, IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar,\r\n  IonButton, IonPopover } from '@ionic/react';\r\nimport './OScope.css';\r\nimport Canvas from 'components/Canvas';\r\n\r\n\r\nimport WakeLock from 'components/WakeLock';\r\n\r\nconst OScope: React.FC = () => {\r\n  const name = \"Oscilloscope\";\r\n  const timeUnitDiv = 453.6;\r\n  const voltUnitDiv = .1;\r\n  const maxVolt = 5;\r\n  const minVolt = 0.1;\r\n  const [flag, setFlag] = useState(true);\r\n\r\n  const [fullscreenFlag, setFullscreenFlag] = useState(true);\r\n  const [displayFlag, setDisplayFlag] = useState(true);\r\n  const [voltageStart, setVoltageStart] = useState(.5);\r\n  const [timeStart, setTimeStart] = useState(1);\r\n  const [frequency, setFrequency] = useState(440);\r\n  const [triggerFlag, setTriggerFlag] = useState(true);\r\n  const [cursorFlag, setCursorFlag] = useState(false);\r\n  const [autoset, setAutoset] = useState(false);\r\n  const [timeDiff, setTimeDiff] = useState(0);\r\n  const [voltDiff, setVoltDiff] = useState(0);\r\n  \r\n  function changeFrequency(frequency : number){\r\n    setFrequency(frequency);\r\n  }\r\n\r\n\r\n  function changeCursorDiff(timeDiff: number, voltDiff: number){\r\n    setTimeDiff(timeDiff);\r\n    setVoltDiff(voltDiff);\r\n  }\r\n\r\n  function changeVoltageInc(){\r\n    if((voltageStart+voltUnitDiv) <= maxVolt){\r\n      setVoltageStart(Math.round((voltageStart+voltUnitDiv)*10)/10)\r\n    }\r\n  }\r\n  function changeVoltageDec(){\r\n    if((voltageStart-voltUnitDiv) >= minVolt){\r\n      setVoltageStart(Math.round((voltageStart-voltUnitDiv)*10)/10)\r\n    }\r\n  }\r\n\r\n  function changeVoltageDiv(voltageDiv : number) {\r\n    setVoltageStart(voltageDiv)\r\n  }\r\n\r\n  function changeTimeInc(){\r\n    if(timeStart !== 80){\r\n      setTimeStart((prev) => prev+1)\r\n    }\r\n  }\r\n  function changeTimeDec(){\r\n    if(timeStart !== 1){\r\n      setTimeStart((prev) => prev-1)\r\n    }\r\n  }\r\n\r\n  function changeTimeDiv(timeDiv : number) {\r\n    setTimeStart(timeDiv)\r\n  }\r\n\r\n  function changeFlag(){\r\n    setFlag(!flag);\r\n  }\r\n\r\n  function changeDisplayFlag(){\r\n    setDisplayFlag(!displayFlag);\r\n  }\r\n\r\n  function changeFullscreenFlag(){\r\n    setFullscreenFlag(!fullscreenFlag);\r\n  }\r\n\r\n  function changeCursorFlag(){\r\n    setCursorFlag(!cursorFlag)\r\n  }\r\n\r\n  const [triggerMenuPopoverState, setShowTriggerMenuPopover] = useState({ showPopover: false });\r\n\r\n  function toggleAutosetButton() {\r\n    // Don't allow toggling off via button.\r\n    setAutoset(true);\r\n  }\r\n\r\n  function autosetFinish() {\r\n    setAutoset(false);\r\n  }\r\n  \r\n  function popoverTriggerMenuSet(value: number) {\r\n    setShowTriggerMenuPopover({ showPopover: false });\r\n    if(value === 0 ){\r\n      setTriggerFlag(true);\r\n    }else if(value === 1) {\r\n      setTriggerFlag(false);\r\n    }else if(value === 2){\r\n      // Not implemented\r\n    }\r\n  }\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader className={fullscreenFlag ? \"header\" : \"header-full\"}>\r\n        {/* Button for disabling fullscreen */}\r\n        <IonButton className={fullscreenFlag ? \"flscrn-button-graph-small\" : \"flscrn-button-hidden\"} mode=\"ios\" fill=\"clear\" onClick = {() => changeFullscreenFlag()}>\r\n          <img className=\"fullscreen-img\" src=\"/assets/fullscreenwhite.png\" alt=\"\"></img>\r\n        </IonButton>\r\n        <IonToolbar mode=\"ios\" color=\"primary\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          {/* <IonImg slot=\"end\" class={isPlatform(\"ios\") ? \"logo-ios\" : \"logo-md\"} src=\"assets/Husker_Scope_Logo_circle.png\"></IonImg> */}\r\n          <IonTitle> <b style={{fontWeight: \"bolder\"}}>Husker Scope</b>{\": \" + name}</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent fullscreen scrollY={false} color=\"secondary\">\r\n      <div className=\"full-screen\">\r\n\r\n        {/* The button for enabling fullscreen */}\r\n        <IonButton className={fullscreenFlag ? \"flscrn-button-hidden\" : \"flscrn-button-graph-full\"} mode=\"ios\" \r\n                   onClick = {() => changeFullscreenFlag()} fill=\"clear\">\r\n          <img className=\"fullscreen-img\" src=\"/assets/fullscreen2.png\" alt=\"\"></img>\r\n        </IonButton>\r\n\r\n        {/* Button for toggling display on fullscreen */}\r\n        <IonButton className={fullscreenFlag ? \"fullscreen-display-button-hidden\" : \"fullscreen-display-button\" } \r\n                   onClick = {() => changeDisplayFlag()} mode=\"ios\" fill=\"clear\">\r\n          <img className=\"display-icon\" src=\"/assets/displayoff.png\" alt=\"\"></img>\r\n        </IonButton>\r\n\r\n\r\n        {/* Display textbox for displaying frequency, Time Division, & Voltage Division */}\r\n        <label className={isPlatform(\"ios\") || isPlatform(\"android\") ? (displayFlag ? \"display-data-hidden\" : (fullscreenFlag ? \"display-data\" : \"display-data-full\")) : \r\n                                                                       (displayFlag ? \"display-data-hidden\" : (fullscreenFlag ? \"display-data-web\" : \"display-data-full-web\"))}>\r\n          <b>Frequency</b>: {frequency}Hz <br />\r\n          <b> Time Division</b>: {(timeStart*.4536).toFixed(4)}ms <br />\r\n          <b> Voltage Division</b>: {voltageStart.toFixed(1)}V <br />\r\n          { cursorFlag ?\r\n              <>\r\n                <b> Voltage</b>: {(voltageStart*8*voltDiff).toFixed(1)}V <br />\r\n                <b> Time</b>: {(timeStart*.4536*10*timeDiff).toFixed(4)}ms <br />\r\n              </>\r\n              : null\r\n          } \r\n        </label>\r\n\r\n        {/* Makes it so the screen doesn't turn off when on the oscope page */}\r\n        <WakeLock enabled={true} />\r\n\r\n        {/* The graph element for the oscope */}\r\n        <div className={isPlatform(\"ios\") || isPlatform(\"android\") ? (fullscreenFlag ? \"oscilloscope-div\" : \"oscilloscope-div-full\") : \r\n                                                                     (fullscreenFlag ? \"oscilloscope-div-web\" : \"oscilloscope-div-full-web\")}>\r\n        <Canvas \r\n          className=\"oscope-graph\"\r\n          isFullscreen={fullscreenFlag} \r\n          playPauseFlag = {flag}\r\n          voltageDiv = {voltageStart}\r\n          timeDiv = {timeStart}\r\n          cursorChangeCallback = {changeCursorDiff}\r\n          frequencyChangeCallback = {changeFrequency}\r\n          timeDivChangeCallback = {changeTimeDiv}\r\n          voltageDivChangeCallback = {changeVoltageDiv}\r\n          autoset = {autoset}\r\n          autosetFinishCallback = {autosetFinish}\r\n          triggerFlag = {triggerFlag}\r\n          cursorFlag = {cursorFlag}\r\n        />\r\n        </div>\r\n\r\n        {/* The buttons on the right hand side of the graph */}\r\n        <div className={isPlatform(\"ios\") || isPlatform(\"android\") ? (fullscreenFlag ? \"side-data\" : \"side-data-hidden\") : \r\n                                                                     (fullscreenFlag ? \"side-data-web\" : \"side-data-hidden\")}>\r\n          <div className=\"voltage-division-positive\"> {/* First row of UI buttons */}\r\n            <IonButton class=\"voltage-time-division-button\" mode=\"ios\" onClick = {() => changeVoltageInc()} color=\"light\" data-testid=\"volt-div-pos-button\">\r\n              <div>\r\n                Volt/Div\r\n                <div>\r\n                  +{voltUnitDiv}V\r\n                  </div>\r\n              </div>\r\n            </IonButton>\r\n          </div>\r\n\r\n          <div className=\"time-division\"> {/* Second row of UI buttons */}\r\n          <IonButton class=\"voltage-time-division-button\" mode=\"ios\" onClick = {() => changeTimeDec()} color=\"light\" data-testid=\"time-div-neg-button\">\r\n              <div>\r\n                Time/Div\r\n                <div>\r\n                  -{timeUnitDiv}us\r\n                </div>\r\n              </div>\r\n            </IonButton>\r\n            <IonButton id = \"pause-play-button\" class=\"pause-play-button\" mode=\"ios\" onClick = {() => changeFlag()} color={flag ? \"primary\" : \"light\"} data-testid=\"pause-play-button\">\r\n              <div>\r\n                <img className=\"pause-play-img\" src={flag ? \"/assets/pause.png\" : \"/assets/play.png\"} alt=\"\" ></img>\r\n                <div>Run/Pause</div>\r\n              </div>\r\n            </IonButton>\r\n            <IonButton class=\"voltage-time-division-button\" mode=\"ios\" onClick = {() => changeTimeInc()} color=\"light\" data-testid=\"time-div-pos-button\">\r\n              <div>\r\n                Time/Div\r\n                <div>\r\n                  +{timeUnitDiv}us\r\n                </div>\r\n              </div>\r\n            </IonButton>\r\n          </div>\r\n\r\n          <div className=\"degree\"> {/* Third row of UI buttons */}\r\n            <IonButton class=\"voltage-time-division-button\" mode=\"ios\" onClick = {() => changeVoltageDec()}  color=\"light\" data-testid=\"volt-div-neg-button\">\r\n              <div>\r\n                Volt/Div\r\n                <div>\r\n                  -{voltUnitDiv}V\r\n                </div>\r\n              </div>\r\n            </IonButton>\r\n          </div>\r\n          <div className=\"pause-and-difference\"> {/* Forth row or UI buttons */}\r\n          <IonButton class=\"utility-buttons\" mode=\"ios\" onClick = {() => toggleAutosetButton()} color={autoset ? \"primary\" : \"light\"} data-testid=\"util-1-button\">\r\n              <div>\r\n                Auto\r\n              </div>\r\n          </IonButton>\r\n          <IonButton class=\"utility-buttons\" mode=\"ios\"  onClick = {() => changeCursorFlag()} color={cursorFlag ? \"primary\" : \"light\"} data-testid=\"util-2-button\">\r\n              <div>\r\n                Cursors\r\n              </div>\r\n          </IonButton>\r\n          <IonButton class=\"utility-buttons\" mode=\"ios\" color={displayFlag ? \"light\" : \"primary\"} onClick = {() => changeDisplayFlag()} data-testid=\"util-5-button\">\r\n              <div>\r\n                Display\r\n              </div>\r\n          </IonButton>\r\n          </div>\r\n          <div className=\"save-display\"> {/* Fifth row of UI buttons */}\r\n          <IonButton class=\"utility-buttons\" mode=\"ios\" color=\"light\" data-testid=\"util-4-button\">\r\n              <div>\r\n                Save\r\n              </div>\r\n          </IonButton>\r\n          <IonButton class=\"utility-buttons\" mode=\"ios\" color=\"light\" onClick={() => setShowTriggerMenuPopover({ showPopover: true })} data-testid=\"util-6-button\">\r\n              <div>\r\n                Trigger<br />Menu\r\n              </div>\r\n          </IonButton>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        {/* Trigger Menu Popover */}\r\n        <IonPopover\r\n          isOpen={triggerMenuPopoverState.showPopover}\r\n          cssClass={isPlatform(\"ios\") || isPlatform(\"android\") ? \"input-popover2\" : \"input-popover2-web\"}\r\n          mode=\"ios\"\r\n          showBackdrop={true}\r\n          onDidDismiss={() => setShowTriggerMenuPopover({ showPopover: false })} data-testid=\"triggerMenu-popup\">\r\n          <div className=\"popover-content2\">\r\n            <IonButton class=\"trigger-popup-button\"\r\n              onClick={(e: any) => popoverTriggerMenuSet(0)} data-testid=\"Rising-confirm\">\r\n              Rising\r\n            </IonButton>\r\n            <IonButton class=\"trigger-popup-button\"\r\n              onClick={(e: any) => popoverTriggerMenuSet(1)} data-testid=\"Falling-confirm\">\r\n              Falling\r\n            </IonButton>\r\n            <IonButton class=\"trigger-popup-button\"\r\n              onClick={(e: any) => popoverTriggerMenuSet(2)} data-testid=\"Auto-confirm\">\r\n              Single-<br />Trigger\r\n            </IonButton>\r\n          </div>\r\n        </IonPopover>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default OScope;\r\n","import { IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar, IonImg} from '@ionic/react';\r\nimport './About.css';\r\n\r\n\r\nconst About: React.FC = () => {\r\n  const name = \"About\";\r\n\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar mode=\"ios\" color=\"primary\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          <IonTitle> <b style={{fontWeight: \"bolder\"}}>Husker Scope</b>{\": \" + name}</IonTitle>\r\n          <IonImg slot=\"end\" class=\"nebraska-n\" src=\"assets/Husker_Scope_Logo_circle.png\"></IonImg>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen scrollY={true} color=\"secondary\">\r\n        <div className=\"content\">\r\n          <div className=\"overview\">Project Overview</div>\r\n          <div className=\"project-vision\">Project Vision</div>\r\n          <div className=\"project-justification\">Project Justification</div>\r\n        </div>\r\n        <div className=\"content\">\r\n          <div className=\"overview-text\">Husker Scope is an iOS and Android application that serves as a dual channel function generator and single channel oscilloscope. The dual channel function generator is able to output sine, square, sawtooth and triangle waveforms with a range of 20 to 20,000 Hz. The phase, amplitude and frequency are able to be adjusted within the application. The oscilloscope will show time and volts per division as well as cursors for signal measurement, pause and image export, and triggering.</div>\r\n          <div className=\"outer\">\r\n            <div className=\"project-vision-text\">To provide a free and cross-platform application containing a function generator and oscilloscope that will be available to UNL students and Engineering students across the globe.</div>\r\n            <IonImg slot=\"end\" class=\"logo-about\" src=\"assets/Husker_Scope_Logo_rounded_corners.png\"></IonImg>\r\n          </div>\r\n          <div className=\"project-justification-text\">There are a variety of Function Generators and Oscilloscopes on both the iOS and Google Play store, but most of the iOS applications need to be purchased and Husker Scope is a one stop shop for all function generator and oscilloscope needs on both the iOS and Google Play store. Additionally, most applications require additional hardware to be purchased for proper functionality, but the Husker O-Scope will function through the use of a standard 3.5mm audio jack.</div>        \r\n        </div>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","import { IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar, IonImg} from '@ionic/react';\r\nimport './Tutorial.css';\r\n\r\n\r\nconst Tutorial: React.FC = () => {\r\n  const name = \"Tutorial\";\r\n\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar mode=\"ios\" color=\"primary\">\r\n          <IonButtons slot=\"start\">\r\n            <IonMenuButton />\r\n          </IonButtons>\r\n          <IonTitle> <b style={{fontWeight: \"bolder\"}}>Husker Scope</b>{\": \" + name}</IonTitle>\r\n          <IonImg slot=\"end\" class=\"nebraska-n\" src=\"assets/Husker_Scope_Logo_circle.png\"></IonImg>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent fullscreen scrollY={true} color=\"secondary\">\r\n        <div className='tutorial-page'>\r\n          <div className=\"main-div\">\r\n            <div className=\"intro-div\">\r\n              <p> &emsp;This page serves as a tutorial for what all the buttons on the Function Generator and Oscilloscope do. First will be an \r\n                  image of the Function Generator with what all the buttons on the UI do. Following that, there will be a picture of the Oscilloscope with information \r\n                  on what the buttons do. We hope it's of help!\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <div className='fg-tutorial-img-div'>\r\n                <IonImg className=\"fg-tutorial-img\" src=\"assets/function_generator_tutorial.png\" />\r\n              </div>\r\n              <ol>\r\n                <li>These buttons are to select which channel the user wants to edit.</li>\r\n                <li>This button serves the purpose of displaying the frequency of the channel and if it is pressed, a popup is displayed that allows for an exact \r\n                    frequency to be entered using the keyboard.</li>\r\n                <li>This button serves the purpose of displaying the amplitude of the channel and if it is pressed, a popup is displayed that allows for an exact \r\n                    amplitude to be entered using the keyboard.</li>\r\n                <li>This button serves the purpose of displaying the phase of the channel and if it is pressed, a popup is displayed that allows for an exact \r\n                    phase to be entered using the keyboard. <br /> Note: The sliders underneath the previous 3 buttons are for changing the values of frequency, \r\n                    amplitude, and phase respectively.</li>\r\n                <li>The four waveform buttons are used for setting the waveform for the currently selected channel.</li>\r\n                <li>These two buttons are for playing and pause the output on the respective channels.</li>\r\n              </ol>\r\n\r\n              <div className='os-tutorial-img-div'>\r\n                <IonImg className=\"os-tutorial-img\" src=\"assets/oscope_tutorial.png\" />\r\n              </div>\r\n\r\n              <ol>\r\n                <li>This is the oscilloscope graph, which is where the wave is displayed.</li>\r\n                <li>The small triangles on the top and left of the graph are the oscilloscope's triggers.</li>\r\n                <li>The red half-circles on the sides of the graph are the oscilloscope's cursors.</li>\r\n                <li>This is a data display which is used for displaying the frequency, time division, volt division, and if the cursors are enabled it also \r\n                    displays the voltage and time measures.</li>\r\n                <li>This button and the one below the run/pause button are used for increasing and decreasing the voltage division.</li>\r\n                <li>This button and the one to the right of the run/pause button are used for decreasing and increasing the time division.</li>\r\n                <li>This is the run/pause button. If the button is red, the graph will update. If it is white, the graph will be paused.</li>\r\n                <li>This button is used for autosetting the graph.</li>\r\n                <li>This button enables and disables the cursors on the graph. If the button is red, the cursors are enabled. If the button is white, the cursors are diabled.</li>\r\n                <li>This button enables and disables the on graph display. If the button is red, the display is enabled. If the button is white, the display is enabled.</li>\r\n                <li>Save button: In progress</li>\r\n                <li>This button displays a Trigger Menu that has the options for changing between rising and falling edge and single trigger.</li>\r\n                <li>This button changes the graph to fullscreen. After the graph is in fullscreen, there is a button in the same location that disables the fullscreen. <br />\r\n                    Note: When the graph is in fullscreen, the button below the fullscreen button enables and disables the data display.</li>\r\n              </ol>\r\n              \r\n            </div>\r\n          </div>\r\n        </div>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default Tutorial;","import { IonApp, IonRouterOutlet, IonSplitPane} from '@ionic/react';\r\nimport { IonReactRouter } from '@ionic/react-router';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\nimport { Plugins } from '@capacitor/core';\r\nimport Menu from './components/Menu';\r\nimport FunctionGenerator from './pages/FunctionGenerator';\r\nimport OScope from './pages/OScope';\r\nimport About from './pages/About';\r\nimport Tutorial from './pages/Tutorial';\r\n\r\n/* Core CSS required for Ionic components to work properly */\r\nimport '@ionic/react/css/core.css';\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport '@ionic/react/css/normalize.css';\r\nimport '@ionic/react/css/structure.css';\r\nimport '@ionic/react/css/typography.css';\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport '@ionic/react/css/padding.css';\r\nimport '@ionic/react/css/float-elements.css';\r\nimport '@ionic/react/css/text-alignment.css';\r\nimport '@ionic/react/css/text-transformation.css';\r\nimport '@ionic/react/css/flex-utils.css';\r\nimport '@ionic/react/css/display.css';\r\n\r\n/* Theme variables */\r\nimport './theme/variables.css';\r\n\r\nimport './App.css';\r\n\r\nimport { AppContextProvider } from './State';\r\nimport { isPlatform } from '@ionic/core';\r\n\r\n\r\nconst App: React.FC = () => {\r\n  useEffect(() => {\r\n    // Setup handling for backbutton.\r\n    const listener = (ev: Event) => {\r\n      (ev as CustomEvent).detail.register(-1, () => {\r\n        Plugins.App.exitApp();\r\n      })\r\n    };\r\n\r\n    document.addEventListener('ionBackButton', listener);\r\n\r\n    return () => {\r\n      document.removeEventListener('ionBackButton', listener);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <AppContextProvider>\r\n    <IonApp className={isPlatform(\"android\") || isPlatform(\"ios\") ? \"\" : \"web-zoom\"} >\r\n      <IonReactRouter>\r\n        <IonSplitPane contentId=\"main\" disabled={true}>\r\n          <Menu />\r\n          <IonRouterOutlet mode=\"md\" id=\"main\">\r\n            <Switch>\r\n            <Route path=\"/\" exact={true}>\r\n              <Redirect to=\"/page/FunctionGenerator\" />\r\n            </Route>\r\n            <Route path=\"/page/FunctionGenerator\" exact={true}>\r\n              <FunctionGenerator />\r\n            </Route>\r\n            <Route path=\"/page/OScope\" exact={true}>\r\n              <OScope />\r\n            </Route>\r\n            <Route path=\"/page/Tutorial\" exact={true}>\r\n              <Tutorial />\r\n            </Route>\r\n            <Route path=\"/page/About\" exact={true}>\r\n              <About />\r\n            </Route>\r\n            </Switch>\r\n          </IonRouterOutlet>\r\n        </IonSplitPane>\r\n      </IonReactRouter>\r\n    </IonApp>\r\n    </AppContextProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t109,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t110,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t111,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t112,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t113,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t114,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t115,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t116,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t117,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t118,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t119,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t120,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t121,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t122,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t123,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t124,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t125,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t126,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t127,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t128,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t129,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t130,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t131,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t132,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t133,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t134,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t135,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t136,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t137,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t138,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t139,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t140,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t141,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t142,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t143,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t144,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t145,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t146,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t147,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t148,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t149,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t150,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t151,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 75;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t152,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 77;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}